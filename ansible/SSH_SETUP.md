# SSH Configuration –¥–ª—è –¥–µ–ø–ª–æ—è

## üîë –ü–æ–Ω–∏–º–∞–Ω–∏–µ SSH –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

**–í–∞–∂–Ω–æ —Ä–∞–∑–ª–∏—á–∞—Ç—å –¥–≤–∞ —Ç–∏–ø–∞ SSH –∫–ª—é—á–µ–π:**

### 1. **Ansible SSH –∫–ª—é—á** (–¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É)
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Ansible –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É
- –û–±—ã—á–Ω–æ `~/.ssh/id_rsa` –Ω–∞ –≤–∞—à–µ–π –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ `inventory/production.yml`

### 2. **Deploy Key** (–Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –¥–ª—è Git)
- –ù–∞—Ö–æ–¥–∏—Ç—Å—è –ù–ê –°–ï–†–í–ï–†–ï: `~/.ssh/id_rsa_collector_monorepo`
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è —Å GitHub
- –î–æ–±–∞–≤–ª–µ–Ω –∫–∞–∫ Deploy Key –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

## ‚öôÔ∏è –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### –®–∞–≥ 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSH –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–µ—Ä–≤–µ—Ä—É
```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –º–æ–∂–µ—Ç–µ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh user@your-server-ip

# –ï—Å–ª–∏ –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç—Å—è, —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤–∞—à –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á
ssh-copy-id user@your-server-ip
```

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ Deploy Key –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh user@your-server-ip

# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ deploy key —Ä–∞–±–æ—Ç–∞–µ—Ç
eval "$(ssh-agent -s)"
ssh-add ~/.ssh/id_rsa_collector_monorepo
ssh -T git@github.com

# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ:
# "Hi username/repo! You've successfully authenticated, but GitHub does not provide shell access."
```

### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ inventory
```yaml
# inventory/production.yml
all:
  hosts:
    quotes-prod:
      ansible_host: "YOUR_SERVER_IP"
      ansible_user: "YOUR_SSH_USER"
      ansible_ssh_private_key_file: "~/.ssh/id_rsa"  # –í–ê–® –ª–æ–∫–∞–ª—å–Ω—ã–π SSH –∫–ª—é—á
```

## üö® –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏

### ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ:
- –£–∫–∞–∑—ã–≤–∞—Ç—å `id_rsa_collector_monorepo` –≤ inventory (—ç—Ç–æ deploy key –ù–ê —Å–µ—Ä–≤–µ—Ä–µ)
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å SSH agent –ª–æ–∫–∞–ª—å–Ω–æ —Å deploy key
- –ü—É—Ç–∞—Ç—å SSH –∫–ª—é—á –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É –∏ deploy key –¥–ª—è Git

### ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ:
- –í inventory —É–∫–∞–∑—ã–≤–∞—Ç—å –í–ê–® SSH –∫–ª—é—á –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É
- Deploy key –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ù–ê –°–ï–†–í–ï–†–ï –¥–ª—è git –æ–ø–µ—Ä–∞—Ü–∏–π
- SSH agent —Å deploy key –∑–∞–ø—É—Å–∫–∞—Ç—å –ù–ê –°–ï–†–í–ï–†–ï (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: Ansible –Ω–µ –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è
```bash
# –¢–µ—Å—Ç –ø—Ä—è–º–æ–≥–æ SSH –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
ssh user@your-server-ip

# –¢–µ—Å—Ç —á–µ—Ä–µ–∑ Ansible
ansible quotes-prod -m ping
```

### –ü—Ä–æ–±–ª–µ–º–∞: Git clone –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–æ –≤—Ä–µ–º—è –¥–µ–ø–ª–æ—è
```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ git –¥–æ—Å—Ç—É–ø
ssh user@your-server-ip
eval "$(ssh-agent -s)" && ssh-add ~/.ssh/id_rsa_collector_monorepo
git clone YOUR_REPO_URL /tmp/test-clone
rm -rf /tmp/test-clone
```

## ‚úÖ –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

–í—Å–µ —ç—Ç–∏ –∫–æ–º–∞–Ω–¥—ã –¥–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å:
```bash
# 1. SSH –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh user@your-server-ip

# 2. Ansible ping
ansible quotes-prod -m ping

# 3. Git –¥–æ—Å—Ç—É–ø –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (–≤—ã–ø–æ–ª–Ω–∏—Ç—å –ù–ê –°–ï–†–í–ï–†–ï)
ssh user@your-server-ip "eval \"\$(ssh-agent -s)\" && ssh-add ~/.ssh/id_rsa_collector_monorepo && ssh -T git@github.com"
```